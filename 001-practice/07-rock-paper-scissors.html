<!DOCTYPE html>
<html>
  <head>
    <Title>Rock Paper Scissors but better this time</Title>
  </head>
  <body>
    <h1 class="header">Rock Paper Scissors but better this time</h1>
   <!--//===============================================================================-->
    <button class="rock-button" onclick="
    const computerMove = pickComputerMove(); // we can make the variable the output of the funciton, effectively bringing the scope of the vriable out of the function and to the global scope.
    let result = '';

    selectWinOrLose('rock', 'paper', 'scissors', 'rock');
    ">Rock</button>
  <!--//===============================================================================-->
    <button class="paper-button" onclick="
    let computerMove = pickComputerMove(); // we can make the variable the output of the funciton, effectively bringing the scope of the vriable out of the function and to the global scope.
    let result = '';

    selectWinOrLose('paper', 'scissors', 'rock', 'paper');
    ">Paper</button>
   <!--//===============================================================================-->
    <button class="scissors-button" onclick="
    const computerMove = pickComputerMove(); // we can make the variable the output of the funciton, effectively bringing the scope of the vriable out of the function and to the global scope.
    let result = '';

    selectWinOrLose('paper', 'rock', 'paper', 'scissors');
">Scissors</button>

    <p class="win-or-lose">Pick a button!</p>
    <p class="score"></p>
  <!--//===============================================================================-->
   <button onclick="resetScore()">Reset Score  </button>
  <!--//===============================================================================-->
    <script>
      
      let score = JSON.parse(localStorage.getItem('score')) || {win:0,lose:0,tie:0};
      localStorage.setItem('score', JSON.stringify(score));

      //===============================================================================
      
      document.querySelector('.score')
        .innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`

      //===============================================================================
      
      function resetScore() {
        score = {
          win: 0,
          lose: 0,
          tie: 0
        };
        document.querySelector('.score').innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`
        localStorage.setItem('score', JSON.stringify(score));
      }

      //===============================================================================

      function pickComputerMove() {
        const randomNumber = Math.random();
        let computerMove = '';
    
        if (randomNumber <= 1/3) {
          computerMove = 'rock';
        } else if (randomNumber > 1/3 && randomNumber <=2/3) {
          computerMove = 'paper';
        } else if (randomNumber > 2/3) {
          computerMove = 'scissors';
        }
        return computerMove; //console logging this function will result in the computer move before giving an error.
      }

      //===============================================================================

      function outputtingAlert(lose, win, tie, computerMove) {
          if (computerMove === lose) {
            score.lose++;
            localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'lose!';
          } else if (computerMove === win) {
            score.win++;
            localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'win!';
          } else if (computerMove === tie) {
            score.tie++;
            localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'tie!';
          }
        }

       //===============================================================================

      function selectWinOrLose(a, b, c, d) {
        const computerChoice = pickComputerMove();
        const output = outputtingAlert(b, c, d, computerChoice);

        document.querySelector('.win-or-lose')
          .innerHTML = `You picked ${a}! The computer picked ${computerChoice}! You ${output}`;
        document.querySelector('.score')
          .innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`;
        return
      };
    </script>
  </body>
</html>