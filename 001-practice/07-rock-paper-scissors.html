<!DOCTYPE html>
<html>
  <head>
    <Title>Rock Paper Scissors but better this time</Title>
    <style>
      body {
        background-color: rgb(25, 25, 25);
        color: azure;
      }
      .header {
        font-size:30px;
        font-weight:bold;
      }
      .move-icon {
        height: 50px;
        ;
      }
      .action-button {
        background-color: transparent;
        border: 3px solid white;
        width: 120px;
        height: 120px;  
        border-radius:60px;
        margin: 5px;
        cursor: pointer;
      }
      .result {
        font-size: 25px;
        font-weight:bold;
        margin-top: 50px;
      }

      .result-image {
        height:30px;
        width:30px;
      }
      .reset-score {
        border:none;
        margin: 10px;
        padding:8px;
        color:rgb(25, 25, 25); 
        font-weight:bold;
        background-color: rgb(102, 114, 165);
      }

    </style>
  
  </head>
  <body>
    <h1 class="header">Rock Paper Scissors but better this time</h1>

    <button class="action-button" onclick="selectWinOrLose('rock', 'paper', 'scissors', 'rock');"><img src="images/rock-emoji.png" class="move-icon"></button>
    <button class="action-button" onclick="selectWinOrLose('paper', 'scissors', 'rock', 'paper');"><img src="images/paper-emoji.png" class="move-icon"></button>
    <button class="action-button" onclick="selectWinOrLose('scissors', 'rock', 'paper', 'scissors');"><img src="images/scissors-emoji.png" class="move-icon"></button>

    <p class="js-win-or-lose result">Pick a button!</p>
    <p class="js-images-result">You: <img class="js-player-image result-image" src="images/rock-emoji.png"> Computer: <img class="js-computer-image result-image" src="images/rock-emoji.png"></p>
    <p class="js-score"></p>
  <!--//===============================================================================-->
   <button class="reset-score" onclick="resetScore()">Reset Score  </button>
  <!--//===============================================================================-->
    <script>
      //saves score in localStorage and also sets a default if the score cannot be found.
      let score = JSON.parse(localStorage.getItem('score')) || {win:0,lose:0,tie:0};
      localStorage.setItem('score', JSON.stringify(score));

      //===============================================================================// Sets the score in the .score class
      
      document.querySelector('.js-score')
        .innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`;

      //===============================================================================
     
      const computerMove = pickComputerMove();
      let result = '';

      //===============================================================================
      function resetScore() {
        score = {
          win: 0,
          lose: 0,
          tie: 0
        };
        document.querySelector('.js-score').innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`
        localStorage.setItem('score', JSON.stringify(score));
      };

      //===============================================================================
      function pickComputerMove() {
        const randomNumber = Math.random();
        let computerMove = '';

        if (randomNumber <= 1/3) {
          computerMove = 'rock';
        } else if (randomNumber > 1/3 && randomNumber <=2/3) {
          computerMove = 'paper';
        } else if (randomNumber > 2/3) {
          computerMove = 'scissors';
        };
        return computerMove; //console logging this function will result in the computer move before giving an error.
      };
      //===============================================================================

      function outputtingAlert(lose, win, tie, computerMove) {
          if (computerMove === lose) {
            score.lose++;
            localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'lose!';
          } else if (computerMove === win) {
            score.win++;
            localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'win!';
          } else if (computerMove === tie) {
            score.tie++;
           localStorage.setItem('score', JSON.stringify(score)); // Update and store the score in local storage.
            return 'tie!';
          };
        };

       //===============================================================================

       //document.querySelector('.js-images-result').innerHTML = '';
      function selectWinOrLose(a, b, c, d) {
        const computerChoice = pickComputerMove();
        const output = outputtingAlert(b, c, d, computerChoice);
        let playerImage = document.querySelector('.js-player-image');
        let computerImage = document.querySelector('.js-computer-image');

        //document.querySelector('.js-images-result').innerHTML = 'You <img class="js-player-image result-image" src=""> Computer<img class="js-computer-image result-image" src="">';
        //console.log(document.querySelector('.js-images-result'))
        playerImage.setAttribute('src', `images/${a}-emoji.png`);
        computerImage.setAttribute('src', `images/${computerChoice}-emoji.png`);

        //document.querySelector('.js-win-or-lose')
          //.innerHTML = `You picked ${a}! The computer picked ${computerChoice}! You ${output}`;
        document.querySelector('.js-score')
          .innerHTML = `Wins: ${score.win} | Losses: ${score.lose} | Ties: ${score.tie}`;
          return;
      };
      
      //===============================================================================

    </script>
  </body>
</html>